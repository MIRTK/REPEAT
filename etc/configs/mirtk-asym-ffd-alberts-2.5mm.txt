## MIRTK configuration for the classic FFD model that is optimized
## for ALBERTs dataset with a final control point spacing of 2.5 mm
## and using NMI as image dissimilarity measure.

## Transformation model

Multi-level transformation = None
Transformation model       = FFD
Control point spacing      = 2.5


## Image dissimilarity

Interpolation method           = Linear
Image dissimilarity foreground = Union
Image dissimilarity measure    = NMI
No. of bins                    = 64
Pad Parzen window estimation   = No


## Objective function
##
## 'Energy function' is auto-generated by gen-register-mirtk
## script based on the dataset settings, i.e., image channels,
## and the '-asym-' or '-sym-' infix of the 'regid', unless
## an energy function is explicitly specified in this template.

Bending energy weight           = 0.003
Volume preservation weight      = 0.0001
Topology preservation weight    = 0.0001
Topology preservation threshold = 0.5
Jacobian determinant epsilon    = 0.1


## Optimization

Downsample images with padding        = No
Optimization method                   = ConjugateGradientDescent
Line search strategy                  = Adaptive
Divide data terms by initial value    = Yes
Precompute image derivatives          = No
Constrain passive DoFs                = Yes
Conjugate total energy gradient       = Yes
B-spline FFD gradient calculation     = DMFFD
No. of resolution levels              = 3
Maximum no. of gradient steps         = 80
Maximum no. of line search iterations = 12
Maximum streak of rejected steps      = 2
No. of last function values           = 0
Epsilon                               = 0
